{% extends 'main.html' %}
{% load static %}

{% block content %}
    <div class="completeForm">
        <p class="completeForm_title">Форма успешно отправлена!</p>
        <a href="/"><button class="completeForm_returnButton">Главная</button></a>
        <a href="/services"><button class="completeForm_returnButton">Услуги</button></a>
        <a href="/order"><button class="completeForm_returnButton">Запись</button></a>
        <a href="/gallery"><button class="completeForm_returnButton">Галерея</button></a>
        <a href="/partnership"><button class="completeForm_returnButton">Сотрудничество</button></a>
    </div>

    <div class="callBackFormOverlay" id="overlayCallBackForm"></div>
    <div class="messageFormContainer" id="callBackForm">
        <div class="messageFormContainer_titleLevel">
            <p class="messageFormContainer_titleLevel__title">Отправка сообщения</p>
            <img src="{% static 'images/homeImages/cross.svg' %}" alt="" id="closeCallBackForm">
        </div>
        <form method="POST" action="" class="messageFormContainer_messageForm">
            {% csrf_token %}
            {{ formCallBack.as_p }}
            <input type="submit" value="Отправить" class="messageFormContainer_messageForm__submitButton">
        </form>
    </div>

    <script src="{% static 'scripts/navbar.js' %}"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="{% static 'scripts/jquery.inputmask.min.js' %}"></script>
    <script>
        $(document).ready(function() {
            // Применяем маску ввода к полю номера телефона
            $('#id_number').inputmask('+7 (999) 999-99-99', {
                minLength: 10
            });

            // Обработчик отправки формы
            $('#callBackForm').submit(function(event) {
                // Получаем значение поля номера телефона
                var number = $('#id_number').val();
                // Удаляем пробелы, тире, скобки и подчеркивания из номера
                var numberStripped = number.replace(/[\s-()_]/g, '');
                // Проверяем длину номера
                if (numberStripped.length < 12) {
                    // Если номер слишком короткий, показываем сообщение об ошибке
                    alert('Пожалуйста, введите полный номер телефона');
                    // Останавливаем отправку формы
                    event.preventDefault();
                }
            });
        });
    </script>

    <script src="{% static 'scripts/callBackForm.js' %}"></script>
{% endblock %}